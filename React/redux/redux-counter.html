<button id="decrement">-</button>
<span id="count">0</span>
<button id="increment">+</button>

<script src="https://cdn.jsdelivr.net/npm/redux@4.2.1/dist/redux.min.js"></script>

<script>
    // 1.定义reducer函数
    //作用：根据不同的action对象，返回不同的新的state
    //state：管理的数据初始状态
    //action：对象 type 标记当前想要做什么修改
    function reducer (state = { count: 0}, action) {
        //数据不可变，基于原始状态生成一个新的状态
        if(action.type === 'INCREMENT'){
            return { count: state.count + 1 }
        }
        if(action.type ==='DECREMENT'){
            return{ count: state.count - 1 }
        }
        return state
    }

    //2.使用reducer函数生成的store实例
    const store =Redux.createStore(reducer)
    //3.通过store实例的subscribe订阅数据变化
    //回调函数可以在每次stare发生变化的时候自动执行
    store.subscribe(() => {
        //5.通过store实例的getState方法重新获取最新状态更新到视图中
        console.log('state变化了',store.getState())
        document.getElementById('count').innerText = store.getState().count
    })
    //4.通过store实例的dispat函数提交action更改状态
    const inBin =document.getElementById('increment')
    inBin.addEventListener('click',() => {
        //增
        store.dispatch({
            type:'INCREMENT'
        })
    })

    const dBtn =document.getElementById('decrement')
    dBtn.addEventListener('click',() =>{
        //减
        store.dispatch({
            type:'DECREMENT'
        })
    })

    //5.通过store实例的getState方法重新获取最新状态更新到视图中

</script>